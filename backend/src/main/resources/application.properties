spring.application.name=tiendario-backend
server.port=8080

# Disable Elasticsearch autoconfiguration by default (prevents connection errors)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,org.springframework.boot.autoconfigure.elasticsearch.ElasticsearchRestClientAutoConfiguration

# Database Configuration (H2 for local testing)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:tiendario;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=PostgreSQL}
spring.datasource.driverClassName=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.h2.Driver}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.jpa.database-platform=${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.H2Dialect}
spring.h2.console.enabled=${H2_CONSOLE_ENABLED:false}
spring.jpa.hibernate.ddl-auto=update

# Frontend URL for password reset links
app.frontend.url=${APP_FRONTEND_URL:http://localhost:8081}

# Elasticsearch Configuration
spring.elasticsearch.uris=${SPRING_ELASTICSEARCH_URIS:http://localhost:9200}

# Security (JWT Secret) â€” MUST override APP_JWT_SECRET in production!
# HS512 requires minimum 64 bytes (512 bits)
app.jwt.secret=${APP_JWT_SECRET:dev-only-secret-do-not-use-in-production-9a2f8c4e6b0d71f3a5b9e2c8}
app.jwt.expiration-ms=86400000

# Fix bean definition conflict
spring.main.allow-bean-definition-overriding=true

# Stripe Configuration
stripe.api.key=${STRIPE_API_KEY}
stripe.success.url=${STRIPE_SUCCESS_URL:http://localhost:8081/dashboard?payment_success=true}
stripe.cancel.url=${STRIPE_CANCEL_URL:http://localhost:8081/dashboard?payment_canceled=true}

# Logging Configuration
logging.level.root=INFO
logging.level.com.tiendario=DEBUG
logging.file.path=logs
logging.file.name=logs/tiendario-backend.log

# Mail Configuration (Using MailHog defaults for local testing)
spring.mail.host=${SPRING_MAIL_HOST:localhost}
spring.mail.port=${SPRING_MAIL_PORT:1025}
spring.mail.username=${SPRING_MAIL_USERNAME:}
spring.mail.password=${SPRING_MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=false
spring.mail.properties.mail.smtp.starttls.enable=false
